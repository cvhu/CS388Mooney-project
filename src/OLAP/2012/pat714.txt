Objects having a flat surface such as a table are detected by processing a depth image and a color image. A mask indicating an area likely to include an object having the flat surface is generated by processing a depth image including the depth information. A color image corresponding to the depth image is then cropped using the mask to detect a portion of the color image that likely include the object having the flat surface. Geometric features of the cropped color image such as lines are then detected to determine the location and orientation of the object having the flat surface. A subset of the detected geometric features is selected as outlines of the flat surface.
Claims What is claimed is: 1. A method of localizing an object having a flat surface, comprising: receiving a depth image comprising image pixels representing distances between a depth sensor and parts of objects in the depth image; determining a candidate area in the depth image by processing the depth image, wherein the candidate area is a contiguous area having a size smaller than the depth image and represents a portion of the depth image that likely includes the flat surface; receiving a color image captured by a camera, the color image covering the candidate area in the depth image; and detecting the flat surface of the object in the candidate area of the color image by detecting and selecting geometric features from the color image that outlines boundaries of the flat surface. 2. The method of claim 1, wherein determining the candidate area in the depth image comprises: computing normal vectors from the image pixels of the depth image, the normal vectors representing vectors perpendicular to a surface of an object in the depth image; determining one or more areas of the depth image having normal vectors in a predetermined direction; and expanding the one or more areas of the depth image to generate a mask representing the candidate area, a portion of the color image corresponding to the mask cropped to detect the geometric features. 3. The method of claim 1, further comprising Gaussian filtering the depth image before determining the candidate area. 4. The method of claim 1, wherein detecting the geometric features comprises: detecting edges in the color image covering the candidate area; and performing Hough transform on the detected edges to obtain line features in the color image. 5. The method of claim 1, wherein selecting the geometric features comprises: adjusting lengths of the detected geometric features according to depth information in the depth image to determine physical lengths of the geometric features; and selecting a subset of the detected geometric features as outlining a candidate flat surface based on the physical lengths of the detected geometric features. 6. The method of claim 5, wherein the candidate flat surface is evaluated based at least on one of a group consisting of a size of the candidate flat surface, similarity of vectors normal to pixels in the candidate flat surface, and a ratio of the geometric features supporting the candidate flat surface. 7. The method of claim 5, selecting the geometric features further comprises excluding the detected geometric features responsive to determining that a change of depth in points of the geometric feature exceed a threshold. 8. A non-transitory computer readable storage medium structured to store instructions for detecting an object having a flat surface, the instructions when executed by a processor cause the processor to: receive a depth image comprising image pixels representing distances between a depth sensor and parts of objects in the depth image; determine a candidate area in the depth image by processing the depth image, wherein the candidate area is a contiguous area having a size smaller than the depth image and represents a portion of the depth image that likely includes the flat surface; receive a color image captured by a camera, the color image covering the candidate area in the depth image; and detect the flat surface of the object in the candidate area of the color image by detecting and selecting geometric features from the color image that outlines boundaries of the flat surface. 9. The computer readable storage medium of claim 8, wherein instructions to determine the candidate area in the depth image comprise instructions to: compute normal vectors from the image pixels of the depth image, the normal vectors representing vectors perpendicular to a surface of an object in the depth image; determine one or more areas of the depth image having normal vectors in a direction; and expand the one or more areas of the depth image to generate a mask representing the candidate area, the color image cropped to select portions of the color image corresponding to the mask, a portion of the color image corresponding to the mask cropped to detect the geometric features. 10. The computer readable storage medium of claim 8, further comprising instructions to Gaussian filter the depth image before executing instructions to determine the candidate area. 11. The computer readable storage medium of claim 8, wherein instructions to detect the geometric features comprise instructions to: detect edges in the color image covering the candidate area; and perform Hough transform on the detected edges to obtain line features in the color image. 12. The computer readable storage medium of claim 8, wherein instructions to select the geometric features comprise instructions to: adjust lengths of the detected geometric features according to depth information in the depth image to determine physical lengths of the geometric features; and select a subset of the detected geometric features as the outlining a candidate flat surface based on the physical lengths of the detected geometric features. 13. The computer readable storage medium of claim 12, wherein the candidate flat surface is evaluated based at least on one of a group consisting of a size of the candidate flat surface, similarity of vectors normal to pixels in the candidate flat surface, and a ratio of the geometric features supporting the candidate flat surface. 14. The computer readable storage medium of claim 13, wherein instructions to select the geometric features further comprise instructions excluding the detected geometric features responsive to determining that a change of depth in points of the geometric feature exceed a threshold. 15. A system for localizing an object having a flat surface, comprising: a depth image processing module configured to receive a depth image comprising image pixels representing distances between a depth sensor and parts of objects in the depth image, the depth image processing module determining a candidate area in the depth image by processing the depth image, wherein the candidate area is a contiguous area having a size smaller than the depth image and represents a portion of the depth image that likely includes the flat surface; and a color image processing module operatively coupled to the depth image processing module, the color image processing module configured to receive a color image captured by a camera, the color image covering the candidate area in the depth image, the color image processing module configured to detect the flat surface of the object in the candidate area of the color image by detecting geometric features from the color image and selecting geometric features that outlines boundaries of the flat surface. 16. The system of claim 15, wherein the depth image processing module comprises: a normal vector module configured to compute normal vectors from the image pixels of the depth image, the normal vectors representing vectors perpendicular to a surface of an object in the depth image, and determine one or more areas of the depth image having normal vectors in a predetermined direction; and a mask generator coupled to the normal vector module, the mask generator configured to expand the one or more areas of the depth image to generate a mask representing the candidate area, a portion of the color image corresponding to the mask cropped to detect the geometric features. 17. The system of claim 15, comprising a filter module configured to Gaussian filter the depth image before determining the candidate area. 18. The system of claim 15, wherein the color image processing module comprises: an edge detector module configured to detect the geometric features by detecting edges in the color image covering the candidate area; and a feature extractor module coupled to the edge detector module, the feature extractor module configured to perform Hough transform on the detected edges to obtain line features in the color image. 19. The system of claim 15, wherein the color image processing module further comprises: a length adjust module configured to adjust lengths of the detected geometric features according to depth information in the depth image to obtain physical lengths of the geometric features; and a geometry evaluator module coupled to the length adjust module, the geometry evaluator module configured to select a subset of the detected geometric features as outlining a candidate flat surface based on the physical lengths of the detected geometric features. 20. The system of claim 19, wherein the geometry evaluator module determines a vanishing line, an intrinsic camera calibration matrix, a vector normal to the flat surface, and vectors parallel to edges of the flat surface to determine location and orientation of the flat surface. 