Disk based emulation of tape libraries is provided with features that allow easier management and administration of a backup system and also allow increased flexibility to both archive data on tape at a remote location and also have fast restore access to archived data files. Features include automatic emulation of physical libraries, and the retention and write protection of virtual tapes that correspond to exported physical tapes.
Claims What is claimed is: 1. A method of emulating a tape library data storage system using one or more hard disk drives, the method comprising: coupling one or more physical tape libraries to an appliance comprising one or more hard disk drives with a communication link; electronically querying, over said communication link, said one or more physical tape libraries to acquire a configuration of the one or more physical tape libraries; and in response to the electronically querying, allocating data storage space on the one or more hard disk drives to virtual devices of one or more virtual tape libraries, wherein the one or more virtual tape libraries comprise virtual devices identical to physical devices in the acquired configuration of the one or more physical tape libraries in the tape storage system; storing data in the storage space allocated to the virtual devices according to a first user defined periodic schedule; replicating the data stored on the virtual devices onto the one or more physical tape libraries according to a second user defined periodic schedule, wherein the second user defined periodic schedule is different from the first user defined periodic schedule; detecting a request to export one of one or more physical tapes from one of the one or more physical tape libraries; and replicating data from a virtual device corresponding to the physical tape requested to be exported to the physical tape requested to be exported before the physical tape is exported, so as to synchronize the physical tape with the virtual device. 2. The method of claim 1 further comprising: allocating data storage space on the one or more hard disk drives to at least one additional virtual tape library that has no corresponding physical tape library in the data storage system. 3. The method of claim 2, additionally comprising moving virtual tapes from a virtual library that corresponds to a physical library to said additional virtual tape library. 4. The method of claim 2, wherein said additional virtual device comprises a virtual tape drive. 5. The method of claim 2, wherein said additional virtual device comprises a tape cartridge storage slot. 6. The method of claim 3, wherein said moving is performed in response to a command to export a physical tape from a physical tape library. 7. A method of handling data storage on a hard disk storage system implemented to emulate one or more attached tape libraries, said method comprising: requesting export of at least one physical tape from a physical tape library such that the at least one physical tape is physically removed from the physical tape library; in response to requesting export, write-protecting data on the hard disk storage system that is associated with at least one virtual tape corresponding to the at least one physical tape to be exported, such that no write operation is allowed to the at least one virtual tape; and setting a time limit for expiration of said write protection. 8. The method of claim 7, additionally comprising exporting the physical tape. 9. The method of claim 8, additionally comprising reading said write protected data from said virtual tape after said physical tape is exported. 10. A storage system comprising at least one disk based storage appliance and at least one tape library, wherein the disk based storage appliance is configured to respond to commands generated by backup software as at least one emulated tape library, wherein said disk based storage appliance stores data files to at least one virtual tape in an emulated tape library accessible to said backup software, and wherein said data files are also stored on one or more physical tapes that have been previously physically removed from said tape library, wherein said data files are write protected in said disk based appliance based on physical removal of the one or more physical tapes from said tape library, such that no further write operation is allowed to the at least one virtual tape if the one or more physical tapes are removed from the library for a time period corresponding to a time limit for expiration of write protection. 11. A method of emulating a tape library data storage system using one or more hard disk drives, the method comprising: coupling one or more physical tape libraries to an appliance comprising one or more hard disk drives with a communication link; electronically querying, over said communication link, said one or more physical tape libraries to acquire a configuration of the one or more physical tape libraries; in response to the electronically querying, allocating data storage space on the one or more hard disk drives to virtual devices of one or more virtual tape libraries, wherein the one or more virtual tape libraries comprise virtual devices identical to physical devices in the acquired configuration of the one or more physical tape libraries in the tape storage system; allocating data storage space on the one or more hard disk drives to at least one additional virtual tape library that has no corresponding physical tape library in the data storage system; moving virtual tapes from a virtual library that corresponds to a physical library to said additional virtual tape library, wherein said moving is performed in response to a command to export a physical tape from a physical tape library. 