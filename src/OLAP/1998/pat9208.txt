An elegant, cost-effective apparatus and method is disclosed for compensating the effect of joint friction in manipuulators. The invention uses a six axis wrench sensor (also called a force/torque sensor) mounted between the manipulator and a reference body upon which it is supported. From the base wrench measurements, for rotary joints, the joint torques are estimated. The estimation apparatus uses Newton-Euler relations of successive link bodies. The estimated torque is fed back through a torque controller, that virtually eliminates friction and gravity effects. A position control loop encloses the torque controller and provides it with desired torques computed from measured position errors. For linear joints, appropriate forces are estimated. Coupled to link position sensors and the wrench sensor, is a gravity compensator, which generates a dynamic wrench signal that corresponds to the gravity compensated dynamic component of the base wrench signal, based on the position signals and the base wrench signal. Coupled to the gravity compensator and the position sensors is a joint analyzer, which generates a signal that corresponds to the gravity compensated torque that is actually applied to the link at the rotary joint, based on the dynamic wrench signal and the position signals. Both torques at rotary joints and forces at linear joints are estimated by the apparatus. Multiple and single joint manipulators can be evaluated. The achieved precision is substantially greater than for conventional methods and approaches the resolution of the Puma's encoders.
Claims Having described the invention, what is claimed is: 1. An apparatus for generating a signal that corresponds to the gravity compensated torque actually applied to a link at a rotary joint of a manipulator, said manipulator having a base that is connected to a reference body and a plurality of moveable links, the first being connected to said base through a first joint and each other moveable link being connected through a joint to an adjacent link that is kinematically closer to said reference body, and for each of said movable links, a position sensor that generates a position signal that corresponds to the position of said link relative to said respective adjacent link, said signal generating apparatus comprising: a. a wrench sensor that is connected between said base and said reference body to generate a base wrench signal that corresponds to the base wrench that is applied between said base and said reference body, expressed at a sensor measurement point; b. coupled to said position sensors and said wrench sensor, a gravity compensator, which generates a dynamic wrench signal that corresponds to the gravity compensated dynamic component of said base wrench signal, based on said position signals and said base wrench signal; and c. coupled to said gravity compensator and said position sensors, a joint analyzer, which generates a signal that corresponds to the gravity compensated torque that is actually applied to said link at said rotary joint, based on said dynamic wrench signal and said position signals. 2. The signal generator of claim 1, said gravity compensator comprising: a. coupled to said position sensors, a gravity wrench generator, which generates a signal that corresponds to the gravity component of said base wrench, based on said position signals; and b. coupled to said gravity wrench generator and said wrench sensor, a dynamic wrench signal generator, which generates said signal that corresponds to the gravity compensated dynamic component of said base wrench signal, based on said gravity wrench signal and said base wrench signal. 3. The signal generator of claim 2, said gravity wrench generator comprising: a. means for generating, for each link for which a position signal is provided, a vector O.sub.s G.sub.j from said sensor measurement point to the center of mass of said link; and b. means for generating a gravity moment signal that corresponds to ##EQU16## where n is the number of said plurality of links, m.sub.j is the mass of link j and g is the acceleration due to gravity. 4. The signal generator of claim 3, said gravity wrench generator further comprising means for generating a gravity force signal that corresponds to ##EQU17## where n is the number of said plurality of links, m.sub.j is the mass of link j and g is the acceleration due to gravity. 5. The signal generator of claim 2, said gravity wrench generator comprising a look up table that relates, on the one hand combinations of link position signals for all of said links for which a position signal is provided, to, on the other hand a corresponding, predetermined gravity wrench. 6. The signal generator of claim 1, said basis between said signal that corresponds to said gravity compensated torque that is actually applied to said link at said rotary joint on the one hand and, on the other hand, said dynamic wrench signal and said position signals, comprising: ##EQU18## where: .tau..sub.l+1 is said gravity compensated torque that is actually applied to said link at said rotary joint; M.sub.d.sup.O.sbsp.i is the moment of said dynamic wrench signal, expressed at O.sub.i, which is the origin of the axis around which said link to which said torque is actually applied rotates relative to an adjacent link that is kinematically closer to said reference body; -z.sub.i.sup.t [ ] is an operator that projects the contents of the square brackets [ ], which is a vector, onto an axis z.sub.i, which axis is at O.sub.i ; i is the number of said movable links that are kinematically closer to said reference body than said link to which said gravity compensated torque is actually applied; and for each link j of said i movable links: I.sub.j is the inertia tensor of said link j at its center of mass G.sub.j ; .omega..sub.j is the angular velocity of said link j relative to a fixed frame; .omega..sub.j is the angular acceleration of said link j relative to a fixed frame; V.sub.G.sbsb.j is the linear acceleration of the center of mass of said link j relative to a fixed frame; O.sub.i G.sub.j is the vector between O.sub.i and the center of mass G.sub.j of said link j; and m.sub.j is the mass of said link j. 7. The signal generator of claim 1, said basis between said signal that corresponds to said gravity compensated torque that is actually applied at said rotary joint on the one hand and, on the other hand, said dynamic wrench signal and said position signals, comprising a relationship between said gravity compensated torque and at least one parameter selected from the group consisting of: M.sub.d.sup.O.sbsp.i, which is the moment of said dynamic wrench signal, expressed at O.sub.i, which is the origin of the axis around which said link to which said torque is actually applied rotates relative to an adjacent link that is kinematically closer to said reference body; and for each link j of i links, where i is the number of links that are kinematically closer to said reference body than said link to which said torque is actually applied: I.sub.j, which is the inertia tensor of said link j at its center of mass G.sub.j ; .omega..sub.j, which is the angular velocity of said link j relative to a fixed frame; .omega..sub.j, which is the angular acceleration of said link j relative to a fixed frame; V.sub.G.sbsb.j, which is the linear acceleration of the center of mass of said link j relative to a fixed frame; O.sub.i G.sub.j, which is the vector between O.sub.i and the center of mass G.sub.j of said link j; and m.sub.j, which is the mass of said link j. 8. The signal generator of claim 2, said gravity wrench generator comprising: a. means for generating, for each link for which a position signal is provided, a vector O.sub.s G.sub.j from said sensor measurement point to the center of mass of said link; and b. means for generating a gravity moment signal that corresponds to any position dependent components of ##EQU19## where n is the number of said plurality of links, m.sub.j is the mass of link j and g is the acceleration due to gravity. 9. An apparatus for generating a signal that corresponds to the gravity compensated force actually applied to a link at a linear joint of a manipulator, said manipulator having a base that is connected to a reference body and a plurality of moveable links, the first being connected to said base through a first joint and each other moveable link being connected through a joint to an adjacent link that is kinematically closer to said reference body, and for each of said movable links, a position sensor that generates a position signal that corresponds to the position of said link relative to said respective adjacent link, said signal generating apparatus comprising: a. a wrench sensor that is connected between said base and said reference body to generate a base wrench signal that corresponds to the base wrench that is applied between said base and said reference body, expressed at a sensor measurement point; b. coupled to said position sensors and said wrench sensor, a gravity compensator, which generates a dynamic wrench signal that corresponds to the gravity compensated dynamic component of said base wrench signal, based on said position signals and said base wrench signal; and c. coupled to said gravity compensator and said position sensors, a joint analyzer, which generates a signal that corresponds to the gravity compensated force that is actually applied to said link at said linear joint, based on said dynamic wrench signal and said position signals. 10. The signal generator of claim 9, said gravity compensator comprising: a. coupled to said position sensors, a gravity wrench generator, which generates a signal that corresponds to the gravity component of said base wrench, based on said position signals; and b. coupled to said gravity wrench generator and said wrench sensor, a dynamic wrench signal generator, which generates said signal that corresponds to the gravity compensated dynamic component of said base wrench signal, based on said gravity wrench signal and said base wrench signal. 11. The signal generator of claim 10, said gravity wrench generator comprising: a. means for generating, for each link for which a position signal is provided, a vector O.sub.s G.sub.j from said sensor measurement point to the center of mass of said link; and b. means for generating a gravity moment signal that corresponds to ##EQU20## where n is the number of said plurality of links, m.sub.j is the mass of link j and g is the acceleration due to gravity. 12. The signal generator of claim 11, said gravity wrench generator further comprising means for generating a gravity force signal that corresponds to ##EQU21## where n is the number of said plurality of links, m.sub.j is the mass of link j and g is the acceleration due to gravity. 13. The signal generator of claim 10, said gravity wrench generator comprising a look up table that relates, on the one hand combinations of position signals for all of said links for which a position signal is provided, to, on the other hand a corresponding, predetermined gravity wrench. 14. The signal generator of claim 9, said basis between said signal that corresponds to said gravity compensated force that is actually applied to said link at said linear joint on the one hand and, on the other hand, said dynamic wrench signal and said position signals, comprising: ##EQU22## where: f.sub.i+1 is the gravity compensated force that is actually applied to said link at said linear joint; F.sub.d is the force of said dynamic wrench signal; -z.sub.i.sup.t [ ] is an operator that projects the contents of the square brackets [ ], which is a vector, onto an axis z.sub.i, which axis is at O.sub.i, which is the origin of the axis along which said link to which said force is actually applied translates relative to an adjacent link that is kinematically closer to said reference body; i is the number of said movable links that are kinematically closer to said reference body than said link to which said gravity compensated force is actually applied; and for each link j of said i movable links: V.sub.G is the linear acceleration of the center of mass G of said link j relative to a fixed frame; and m is the mass of said link j. 15. The signal generator of claim 10, said gravity wrench generator comprising: a. means for generating, for each link for which a position signal is provided, a vector O.sub.s G.sub.j from said sensor measurement point to the center of mass of said link; and b. means for generating a gravity moment signal that corresponds to any position dependent components of ##EQU23## where n is the number of said plurality of links, m.sub.j is the mass of link j and g is the acceleration due to gravity. 16. An apparatus for generating a signal that corresponds to the gravity compensated torque actually applied to a link at a rotary joint of a manipulator, said manipulator having a base that is connected to a reference body, and a moveable link that is connected to said base through said rotary joint, and a position sensor that generates a position signal that corresponds to the position of said link relative to said base, said signal generating apparatus comprising: a. a wrench sensor that is connected between said base and said reference body to generate a base wrench signal that corresponds to the base wrench that is applied between said base and said reference body, expressed at a sensor measurement point; b. coupled to said position sensor and said wrench sensor, a gravity compensator, which generates a dynamic wrench signal that corresponds to the gravity compensated dynamic component of said base wrench signal, based on said position signal and said base wrench signal; and c. coupled to said gravity compensator and said position sensor, a joint analyzer, which generates a signal that corresponds to the gravity compensated torque that is actually applied to said link at said rotary joint, based on said dynamic wrench signal and said position signal. 17. The signal generator of claim 16, said gravity compensator comprising: a. coupled to said position sensor, a gravity wrench generator, which generates a signal that corresponds to the gravity component of said base wrench, based on said position signal; and b. coupled to said gravity wrench generator and said wrench sensor, a dynamic wrench signal generator, which generates said signal that corresponds to the gravity compensated dynamic component of said base wrench signal, based on said gravity wrench signal and said base wrench signal. 18. The signal generator of claim 17, said gravity wrench generator comprising: a. means for generating a vector O.sub.s G from said sensor measurement point to the center of mass of said link; and b. means for generating a gravity moment signal that corresponds to O.sub.s G.times.m g, where m is the mass of said link and g is the acceleration due to gravity. 19. The signal generator of claim 17, said gravity wrench generator comprising a look up table that relates, on the one hand said position signal for said link to, on the other hand a corresponding, predetermined gravity wrench. 20. The signal generator of claim 16, said basis between said signal that corresponds to said gravity compensated torque that is actually applied to said link at said rotary joint on the one hand and, on the other hand, said dynamic wrench signal and said position signals, comprising: .tau..sub.1 =-z.sub.0.sup.t [M.sub.d.sup.O.sub.0 ] where: .tau..sub.1 is the gravity compensated torque that is actually applied to said link at said rotary joint; M.sub.d.sup.O.sub.0 is the moment of said dynamic wrench signal, expressed at O.sub.0, which is the origin of the axis around which said link to which said gravity compensated torque is actually applied rotates relative to said base; -z.sub.p.sup.t [ ] is an operator that projects the contents of the square brackets [ ], which is a vector, onto an axis z.sub.0, which axis is at O.sub.0. 21. The signal generator of claim 17, said gravity wrench generator comprising: a. means for generating a vector O.sub.s G from said sensor measurement point to the center of mass of said link; and b. means for generating a gravity moment signal that corresponds to any position dependent components of O.sub.S G.times.m g, where m is the mass of said link and g is the acceleration due to gravity. 22. An apparatus for generating a signal that corresponds to the gravity compensated force actually applied to a link at a linear joint of a manipulator, said manipulator having a base that is connected to a reference body, and a moveable link that is connected to said base through said linear joint, and a position sensor that generates a position signal that corresponds to the position of said link relative to said base, said signal generating apparatus comprising: a. a wrench sensor that is connected between said base and said reference body to generate a base wrench signal that corresponds to the base wrench that is applied between said base and said reference body, expressed at a sensor measurement point; b. coupled to said position sensor and said wrench sensor, a gravity compensator, which generates a dynamic wrench signal that corresponds to the gravity compensated dynamic component of said base wrench signal, based on said position signal and said base wrench signal; and c. coupled to said gravity compensator and said position sensor, a joint analyzer, which generates a signal that corresponds to said gravity compensated force that is actually applied to said link at said linear joint, based on said dynamic wrench signal and said position signal. 23. The signal generator of claim 22, said gravity compensator comprising: a. coupled to said position sensor, a gravity wrench generator, which generates a signal that corresponds to the gravity component of said base wrench, based on said position signal; and b. coupled to said gravity wrench generator and said wrench sensor, a dynamic wrench signal generator, which generates said signal that corresponds to the gravity compensated dynamic component of said base wrench signal, based on said gravity wrench signal and said base wrench signal. 24. The signal generator of claim 23, said gravity wrench generator comprising: a. means for generating a vector O.sub.s G from said sensor measurement point to the center of mass of said link; and b. means for generating a gravity moment signal that corresponds to O.sub.s G.times.m g, where m is the mass of said link and g is the acceleration due to gravity. 25. The signal generator of claim 23, said gravity wrench generator comprising a look up table that relates, on the one hand said position signal to, on the other hand a corresponding, predetermined gravity wrench. 26. The signal generator of claim 22, said basis between said signal that corresponds to said gravity compensated force that is actually applied to said link at said linear joint on the one hand and, on the other hand, said dynamic wrench signal and said position signals, comprising: f.sub.1 =-z.sub.0 .sup.t [F.sub.d ] where: f.sub.1 is the gravity compensated force that is actually applied to said link at said rotary joint; F.sub.d is the force of said dynamic wrench signal; and -z.sub.0.sup.t [ ] is an operator that projects the contents of the square brackets [ ], which is a vector, onto an axis z.sub.0, which axis is at O.sub.0, which is the origin of the axis along which said link to which said gravity compensated force is actually applied translates relative to said base. 27. The signal generator of claim 23, said gravity wrench generator comprising: a. means for generating a vector O.sub.s G from said sensor measurement point to the center of mass of said link; and b. means for generating a gravity moment signal that corresponds to any position dependent components of O.sub.s G.times.m g, where m is the mass of said link and g is the acceleration due to gravity. 28. A method for generating a signal that corresponds to the gravity compensated torque actually applied to a link at a rotary joint of a manipulator, said manipulator having a base that is connected to a reference body and a plurality of moveable links, the first being connected to said base through a first joint and each other moveable link being connected through a joint to an adjacent link that is kinematically closer to said reference body, and for each of said movable links, a position sensor that generates a position signal that corresponds to the position of said link relative to said adjacent link, said signal generating method comprising the steps of: a. generating a base wrench signal that corresponds to the base wrench that is applied between said base and said reference body, expressed at a sensor measurement point; b. compensating for gravity by generating a dynamic wrench signal that corresponds to the gravity compensated dynamic component of said base wrench signal, based on said position signals and said base wrench signal; and c. generating a signal that corresponds to said gravity compensated torque that is actually applied to said link at said rotary joint, based on said dynamic wrench signal and said position signals. 29. The signal generating method of claim 28, said step of compensating for gravity comprising the steps of: a. generating the gravity wrench signal by generating a signal that corresponds to the gravity component of said base wrench, based on said position signals; and b. compensating for gravity, based on said gravity wrench signal and said base wrench signal. 30. The signal generating method of claim 29, said step of generating the gravity wrench signal comprising the steps of: a. generating a position vector by, for each link for which a position signal is provided, generating a vector O.sub.s G.sub.j from said sensor measurement point to the center of mass of said link; and b. generating a gravity moment signal that corresponds to ##EQU24## where n is the number of said plurality of links, m.sub.j is the mass of link j and g is the acceleration due to gravity. 31. The signal generating method of claim 30, said step of generating the gravity wrench signal further comprising the step of generating a gravity force signal that corresponds to ##EQU25## where n is the number of said plurality of links, m.sub.j is the mass of link j and g is the acceleration due to gravity. 32. The signal generating method of claim 30, said step of generating the gravity wrench signal comprising the steps of using a predetermined table that relates, on the one hand combinations of position signals for all of said links for which a position signal is provided, to, on the other hand a corresponding, predetermined gravity wrench, looking up the gravity wrench that is related to said combination of generated position signals. 33. The signal generating method of claim 31, said step of generating the gravity wrench comprising the steps of: a. generating a position vector by, for each link for which a position signal is provided, generating a vector O.sub.s G.sub.j from said sensor measurement point to the center of mass of said link; and b. generating a gravity moment signal that corresponds to any position dependent components of ##EQU26## where n is the number of said plurality of links, m.sub.j is the mass of link j and g is the acceleration due to gravity. 34. The signal generating method of claim 31 said basis between said signal that corresponds to said gravity compensated torque that is actually applied to said link at said rotary joint on the one hand and, on the other hand, said dynamic wrench signal and said position signals, being established by the step of evaluating the following relation: ##EQU27## where: .tau..sub.l+1 is said gravity compensated torque that is actually applied to said link at said rotary joint; M.sub.d.sup.O.sbsp.i is the moment of said dynamic wrench signal, expressed at O.sub.i, which is the origin of the axis around which said link to which said torque is actually applied rotates relative to an adjacent link that is kinematically closer to said reference body; -z.sub.i.sup.t [ ] is an operator that projects the contents of the square brackets [ ], which is a vector, onto an axis z.sub.i, which axis is at O.sub.i ; i is the number of said movable links that are kinematically closer to said reference body than said link to which said gravity compensated torque is actually applied; and for each link j of said i movable links: I.sub.j is the inertia tensor of said link j at its center of mass G.sub.j ; .omega..sub.j is the angular velocity of said link j relative to a fixed frame; .omega..sub.j is the angular acceleration of said link j relative to a fixed frame; V.sub.G.sbsb.j is the linear acceleration of the center of mass of said link j relative to a fixed frame; O.sub.i G.sub.j is the vector between O.sub.i and the center of mass G.sub.j of said link j; and m.sub.j is the mass of said link j. 35. The signal generating method of claim 31, said basis between said signal that corresponds to said gravity compensated torque that is actually applied at said rotary joint on the one hand and, on the other hand, said dynamic wrench signal and said position signals, being established by the step of evaluating a relationship between said gravity compensated torque and at least one parameter selected from the group consisting of: M.sub.d.sup.O.sbsp.i, which is the moment of said dynamic wrench signal, expressed at O.sub.i, which is the origin of the axis around which said link to which said torque is actually applied rotates relative to an adjacent link that is kinematically closer to said reference body; and for each link j of i links, where i is the number of links that are kinematically closer to said reference body than said link to which said torque is actually applied: I.sub.j, which is the inertia tensor of said link j at its center of mass G.sub.j ; .omega..sub.j, which is the angular velocity of said link j relative to a fixed frame; .omega..sub.j, which is the angular acceleration of said link j relative to a fixed frame; V.sub.G.sbsb.j, which is the linear acceleration of the center of mass of said link j relative to a fixed frame; O.sub.i G.sub.j which is the vector between O.sub.i and the center of mass G.sub.j of said link j; and m.sub.j, which is the mass of said link j. 36. A method for generating a signal that corresponds to the gravity compensated force actually applied to a link at a linear joint of a manipulator, said manipulator having a base that is connected to a reference body and a plurality of moveable links, the first being connected to said base through a first joint and each other moveable link being connected through a joint to an adjacent link that is kinematically closer to said reference body, and for each of said movable links, a position sensor that generates a position signal that corresponds to the position of said link relative to said adjacent link, said signal generating method comprising the steps of: a. generating a base wrench signal that corresponds to the base wrench that is applied between said base and said reference body, expressed at a sensor measurement point; b. compensating for gravity by generating a dynamic wrench signal that corresponds to the gravity compensated dynamic component of said base wrench signal, based on said position signals and said base wrench signal; and c. generating a signal that corresponds to said gravity compensated force that is actually applied to said link at said linear joint, based on said dynamic wrench signal and said position signals. 37. The signal generating method of claim 36 said basis between said signal that corresponds to said gravity compensated force that is actually applied to said link at said linear joint on the one hand and, on the other hand, said dynamic wrench signal and said position signals, being established by the step of evaluating the following relation: ##EQU28## where: f.sub.i+1 is the gravity compensated force that is actually applied to said link at said linear joint; F.sub.d is the force of said dynamic wrench signal; -z.sub.i.sup.t [ ] is an operator that projects the contents of the square brackets [ ], which is a vector, onto an axis z.sub.i, which axis is at O.sub.i, which is the origin of the axis along which said link to which said force is actually applied translates relative to an adjacent link that is kinematically closer to said reference body; i is the number of said movable links that are kinematically closer to said reference body than said link to which said gravity compensated force is actually applied; and for each link j of said i movable links: V.sub.G is the linear acceleration of the center of mass G of said link j relative to a fixed frame; and m is the mass of said link j. 38. A method for generating a signal that corresponds to the gravity compensated torque actually applied to a link at a rotary joint of a manipulator, said manipulator having a base that is connected to a reference body and that is connected to said moveable link through said rotary joint and a position sensor that generates a position signal that corresponds to the position of said link relative to said base, said signal generating method comprising the steps of: a. generating a base wrench signal that corresponds to the base wrench that is applied between said base and said reference body, expressed at a sensor measurement point; b. compensating for gravity by generating a dynamic wrench signal that corresponds to the gravity compensated dynamic component of said base wrench signal, based on said position signal and said base wrench signal; and c. generating a signal that corresponds to said gravity compensated torque that is actually applied to said link at said rotary joint, based on said dynamic wrench signal and said position signal. 39. A method for generating a signal that corresponds to the gravity compensated force actually applied to a link at a linear joint of a manipulator, said manipulator having a base that is connected to a reference body and that is connected to said moveable link through said linear joint and a position sensor that generates a position signal that corresponds to the position of said link relative to said base, said signal generating method comprising the steps of: a. generating a base wrench signal that corresponds to the base wrench that is applied between said base and said reference body, expressed at a sensor measurement point; b. compensating for gravity by generating a dynamic wrench signal that corresponds to the gravity compensated dynamic component of said base wrench signal, based on said position signal and said base wrench signal; and c. generating a signal that corresponds to said gravity compensated force that is actually applied to said link at said linear joint, based on said dynamic wrench signal and said position signal. 