The posture inclination of the robot is detected, a moment of compensating total floor reaction force about a desired total floor reaction force central point is determined therefrom to be distributed to each foot such that the position/posture of the feet are rotated by predetermined amounts about the desired total floor reaction force central point and a desired foot floor reaction force central points respectively. And by parallel-translating the feet in phase, the force component of the actual total floor reaction force is also controlled. In addition, the internal force components (which do not influence on the actual total floor reaction force) generated by the actual foot floor reaction force are controlled independently. With this, the system can appropriately control the actual total floor reaction force and the actual foot floor reaction force acting on the biped mobile robot, can realize walking with stable posture even when walking on the floor having not only a slant or undulation extending over a relatively long distance, but also on an unexpected local slant or level difference, and can absorb the foot-landing impact to improve the contactability of robot foot with the floor. Moreover, the system can prevent the spinning from happening and decrease the load to be exerted on the joint actuators.
Claims What is claimed is: 1. A system for controlling a legged mobile robot having at least a body and a plurality of legs each connected to the body through a first joint and having a foot connected to its distal end through a second joint, comprising: a. gait generating means for generating a gait of the robot including at least a motion pattern including at least a desired position and a posture of the foot, and a desired pattern of a total floor reaction force acting on the robot; b. desired foot floor reaction force central point determining means for determining a desired foot floor reaction force central point indicative of a point of action on the foot when the total floor reaction force in the generated gait is distributed to each of the feet; c. actual floor reaction force detecting means for detecting an actual floor reaction force acting on the foot; d. foot rotating amount determining means for determining a foot rotating amount for rotating the foot based on at least the detected actual floor reaction force; e. first foot position/posture correcting means for correcting the desired position and/or the posture of the foot such that the position and/or the posture of the foot rotates based on the determined foot rotating amount; f. compensating displacement calculating means for calculating a compensating displacement of the foot based on at least the detected actual floor reaction force; g. second foot position/posture correcting means for correcting the desired position and/or the posture of the foot based on the calculated compensating displacement; and h. joint displacement means for displacing the first joint and the second joint of the robot based on at least the corrected position and/or posture of the foot corrected by the first foot position/posture correcting means and the second foot position posture correcting means. 2. A system according to claim 1, wherein the foot rotating amount determining means calculates a moment acting about the determined desired foot floor reaction force central point and determines the foot rotating amount for rotating the foot based on at least the calculated moment, and the compensating displacement calculating means determines a force component of an actual total floor reaction force based on the detected actual floor reaction force to calculate an error between the determined force component and a force component of the total floor reaction force in the generated gait and calculates the compensating displacement based on the calculated error. 3. A system according to claim 2, wherein the first foot position/posture correcting means corrects the desired position and/or the posture of the foot based on the determined foot rotating amount such that the position and/or the posture of the foot rotates about the desired foot floor reaction force central point or thereabout. 4. A system according to claim 1, wherein the first foot position/posture correcting means corrects the desired position and/or the posture of the foot based on the determined foot rotating amount such that the position and/or the posture of the foot rotates about the desired foot floor reaction force central point or thereabout. 5. A system according to claim 4, wherein the foot rotating amount determining means determines the foot rotating amount for rotating the foot based on at least the detected actual floor reaction force, and the first foot position/posture correcting means corrects the desired position and/or the posture of the foot based on the determined foot rotating amount such that the position and/or the posture of the foot rotates about the desired foot floor reaction force central point or thereabout. 6. A system according to any of claim 1, further including: i. foot moving amount determining means for determining at least one of a moment of total floor reaction force actually acting on the robot, and a moment obtained by subtracting a moment of the floor reaction force acting on the foot from the moment of total floor reaction force actually acting on the robot, and for determining a foot moving amount for moving the foot based on at least the determined moment; and wherein the first foot position/posture correcting means corrects the desired position and/or the posture of the foot based on the determined foot rotating amount and the determined foot moving amount. 7. A system according to claim 6, wherein a moment of a compensating total floor reaction force for posture stabilization to be added to the desired pattern of the total floor reaction force is determined, and wherein the foot rotating amount determining means and/or the foot moving amount determining means determines the foot rotating amount and/or the foot moving amount based on at least the detected actual floor reaction force and the determined moment of the compensating total floor reaction force for posture stabilization. 8. A system according to claim 7, wherein the moment of the compensating total floor reaction force for posture stabilization is determined based on at least an inclination error of the robot. 9. A system according to claim 1, wherein the compensating displacement calculating means includes: j. body acceleration detecting means for detecting a body acceleration of the robot; and k. compensating total floor reaction force's force component calculating means for calculating a force component of the compensating total floor reaction force for posture stabilization based on the detected body acceleration; and calculate the compensating displacement of the foot based on a difference obtained by subtracting the error from the calculated force component of the compensating total floor reaction force. 10. A system according to claim 9, wherein the compensating displacement calculating means distributes the compensating displacement of the foot to each of the feet by multiplying the difference by a predetermined weight. 11. A system according to claim 10, wherein the compensating displacement calculating means makes the weight zero when the foot is lifted. 12. A system according to claim 10, wherein the compensating displacement calculating means varies the weight in response to a frequency of the force component of the actual total floor reaction force. 13. A system according to claim 9, wherein the force component of the compensating total floor reaction force is set to zero or thereabout. 14. A system according to claim 1, wherein the displacement calculating means calculates the compensating displacement of the foot with respect to a direction of gravity. 15. A system according to claim 1, wherein the displacement calculating means calculates the compensating displacement of the foot with respect to a direction of a segment connecting a center of gravity of the robot and a desired total floor reaction force central point. 16. A system according to claim 1, wherein the compensating displacement calculating means determines an internal force component, which does not influence an actual total floor reaction force, from the detected actual floor reaction force to calculate an error between the determined internal force component and an internal force component in the generated gait, and calculates the compensating displacement of each of the feet based on the calculated error. 17. A system according to claim 16, wherein the first foot position/posture correcting means corrects the desired position and/or the posture of the foot based on the determined foot rotating amount such that the position and/or the posture of the foot rotates about the desired foot floor reaction force central point or thereabout. 18. A system according to any of claims 16 to 17, further including: l. foot moving amount determining means for determining at least one of a moment of total floor reaction force actually acting on the robot, and a moment obtained by subtracting a moment of the floor reaction force acting on the foot from the moment of total floor reaction force actually acting on the robot, and for determining a foot moving amount for moving the foot based on at least the determined moment; and wherein the first foot position/posture correcting means corrects the desired position and/or the posture of the foot based on the determined foot rotating amount and the determined foot moving amount. 19. A system according to claim 18, wherein a moment of a compensating total floor reaction force for posture stabilization to be added to the desired pattern of the total floor reaction force is determined, and wherein the foot rotating amount determining means and/or the foot moving amount determining means determines the foot rotating amount and/or the foot moving amount based on at least the detected actual floor reaction force and the determined moment of the compensating total floor reaction force for posture stabilization. 20. A system according to claim 16, wherein a moment of a compensating total floor reaction force for posture stabilization is determined based on at least an inclination error of the robot. 21. A system according to claim 16, wherein the compensating displacement calculating means distributes the compensating displacement of the foot to each of the feet by multiplying the difference by a predetermined weight. 22. A system according to claim 21, wherein the predetermined weight has time-varying characteristics and/or frequency characteristics. 