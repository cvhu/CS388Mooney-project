A method and system is presented for treating moving target regions in a patient's anatomy by creating radiosurgical lesions. The method includes determining a pulsating motion of a patient separately from a determining of a respiratory motion, and directing a radiosurgical beam, from a radiosurgical beam source, to a target in the patient based on the determining of the pulsating motion. Directing the radiosurgical beam to the target may include creating a lesion in the heart to inhibit atrial fibrillation. The method may further include determining the respiratory motion of the patient, and compensating for movement of the target, due to the respiratory motion and the pulsating motion of the patient, in the directing of the radiosurgical beam based on the determining of the respiratory motion and the determining of the pulsating motion.
Claims What is claimed is: 1. A method, comprising: identifying a target in a patient; determining a respiratory motion of the target in the patient; determining a pulsating motion of the target in the patient separately from the determining of the respiratory motion, wherein determining the respiratory motion comprises: detecting a first motion of the target in the patient caused by a combined respiratory and pulsating motion of the patient while the patient breathes during a first period using one or more radiographic images of the target generated during the first period; detecting a second motion of the target in the patient caused substantially only by the pulsating motion while the patient holds a breath during a second period using one or more radiographic images of the target generated during the second period; and calculating the respiratory motion of the target in the patient using the detected first and second motions; and directing a radiosurgical beam, from a radiosurgical beam source, to the target in the patient based on the determining of the pulsating motion and based on the determining of the respiratory motion. 2. The method of claim 1, wherein the target is a heart and the pulsation motion is due to a heartbeat of the heart, and wherein directing the radiosurgical beam to the target comprises creating a lesion in the heart to inhibit atrial fibrillation. 3. The method of claim 1, wherein said directing the radiosurgical beam comprises: determining a relative position of the radiosurgical beam source and the target based on the determining of the respiratory motion and the determining of the pulsating motion; and compensating for movement of the target, due to the respiratory motion and the pulsating motion of the patient, in the directing of the radiosurgical beam based on the determining of the respiratory motion and the determining of the pulsating motion. 4. The method of claim 3, wherein determining the respiratory motion comprises detecting a respiratory cycle and determining the pulsating motion comprises detecting a pulsating cycle, and wherein the pulsating cycle is detected separately from the detecting of the respiratory cycle. 5. The method of claim 3, wherein detecting the first motion of the target in the patient caused by the combined respiratory and pulsating motion comprises: generating the one or more radiographic images of the target during the first period; and combining information of the pulsating cycle and the respiratory cycle with the one or more radiographic images of the target during the first period to form the first motion. 6. The method of claim 5, wherein detecting the second motion of the target in the patient caused substantially only by the pulsating motion comprises: generating the one or more radiographic images of the target while the patient holds the breath during the second period; and combining information of the pulsating cycle with the one or more radiographic images of the target during the second period to form the second motion. 7. The method of claim 6, further comprising: computing a first correction factor from the respiratory motion; and separately computing a second correction factor from the second motion. 8. The method of claim 7, further comprising generating a command signal to adjust the relative position of the radiosurgical beam and the target in compensating for the movement of the target, and wherein the compensating for the movement of the target comprises generating a correction to the command signal using the first and second correction factors. 9. The method of claim 8, wherein the directing of the radiosurgical beam, from the radiosurgical beam source, to the target in the patient comprises directing the radiosurgical beam using the using the command signal. 10. The method of claim 8, wherein the first correction factor, when applied to the command signal, is effective to adjust the relative position of the radiosurgical beam source and the target to account for the respiratory motion caused substantially only by the respiratory motion, and wherein the second factor, when applied to the command signal, is effective to adjust the relative position of the radiosurgical beam source and the target to account for the second motion caused substantially only by the pulsating motion. 11. The method of claim 8, wherein generating one or more radiographic images of the target during the first respiratory cycle comprises: generating a first operational scan of the target and an internal marker at a first position; generating a second operational scan of the target and the internal marker at a second position; generating a first model of internal motion of the internal marker using the first and second positions; generating a second model of external motion using the detected second motion and the calculated respiratory motion; and correlating the external motion and the internal motion using the first and second models. 12. The method of claim 11, wherein generating the first model of the internal motion comprises fitting a first curve to the first and second positions of the internal marker, wherein generating the second model of external motion comprises measuring external motion using external markers to generate a plurality of positions of the external markers and fitting a second curve to the plurality of positions of the external markers, and wherein correlating the external and internal motions comprises comparing the first and second curves. 13. The method of claim 8, wherein generating the command signal to adjust the relative position of the radiosurgical beam source and the target comprises adjusting the relative position of a radiosurgical beam source and the target using a robotic positioning system. 14. The method of claim 7, further comprising: generating a command signal to adjust a relative position of the radiosurgical beam and the target in compensating for the first motion; and generating a combined correction factor using the first and second correction factors, and wherein compensating for the first motion of the target comprises generating a correction to the command signal using the combined correction factor. 15. The method of claim 7, wherein computing the first and second correction factors comprises: generating a first signal representative of the respiratory motion; generating a second signal representative of the second motion; filtering the first and second signals to cancel out undesired frequency components; computing the first correction factor from the filtered first signal; and separately computing the second correction factor from the filtered second signal. 16. The method of claim 1, wherein the pulsating motion is cardiac pumping motion, and wherein calculating the respiratory motion of the target comprises: establishing a look-up table of positional data for the first motion; establishing a look-up table of cardiac motion data for the second motion; and establishing a look-up table of respiratory motion data for the calculated respiratory motion by subtracting the cardiac motion data from the positional data for the first motion. 17. The method of claim 16, further comprising: generating a first signal representative of the respiratory motion of the patient from the look-up table of respiratory motion data; generating a second signal representative of the second motion of the patient from the look-up table of cardiac motion data; computing a first correction factor from the first signal; separately computing a second correction factor from the second signal; and generating a command signal to adjust the relative position of the radiosurgical beam and the target to compensate for the movement of the target; and generating a correction to the command signal using the first and second correction factors. 18. The method of claim 7, wherein computing the first and second correction factors comprises digitally comparing the one or more radiographic images with a pre-operative scan. 19. The method of claim 18, wherein digitally comparing the one or more radiographic images with the pre-operative scan comprises: generating one or more digitally reconstructed radiographs (DRRs), using the pre-operative scan together with the one or more radiographic images; and computing an amount of movement of the target needed to register the one or more DRRs with the one or more radiographic images. 20. The method of claim 8, wherein generating the correction to the command signal comprises: extrapolating the detected first motion of the target into a complete cycle; and synchronizing the command signal to adjust the relative position of the radiosurgical beam source and the target with the extrapolated motion of the target. 21. The method of claim 1, further comprising: computing a first correction factor from the second motion; and providing a static correction factor representative of peaks of the respiratory cycle of the calculated respiratory motion caused substantially only by the respiratory motion of the patient. 22. The method of claim 21, further comprising: generating a command signal to adjust the relative position of the radiosurgical beam and the target to compensate for the movement of the target; and generating a correction to the command signal using the first correction factor and the static correction factor. 23. A system, comprising: an imaging device configured to acquire an image of a target in a patient; a pulsation measurement device configured to detect a pulsating cycle of the target in the patient; a radiosurgical beam source configured to direct a radiosurgical beam, from the radiosurgical beam source, to the target in the patient; and a controller coupled to the radiosurgical beam source and the pulsation measurement device, wherein the controller is configured to identify the target in the image, to receive a signal from the pulsation measurement device representative of the pulsating cycle, and to determine a pulsating motion of the target in the patient based on the pulsating cycle, wherein the controller is configured to detect a first motion of the target caused by a combined respiratory and pulsating motion while the patient breathes during a first period using a plurality of images of the target acquired during the first period, and a second motion of the target caused substantially only by the pulsating motion during a second period using a plurality of images of the target acquired during the second period, and wherein the controller is configured to calculate a respiratory motion of the target in the patient using the first and second motions, and wherein the controller is configured to position the radiosurgical beam source to direct the radiosurgical beam to compensate for the first motion of the target caused by the combined respiratory and pulsating motion using the second motion and the calculated respiratory motion. 24. The system of claim 23, further comprising a breathing sensor coupled to the controller, wherein the breathing sensor is configured to detect a respiratory cycle of the patient, and wherein the controller is configured to receive a signal from the breathing sensor representative of the respiratory cycle, wherein the controller is configured to detect the first motion based on the respiratory cycle. 25. The system of claim 24, wherein the target is a heart and the pulsation motion is due to a heartbeat of the heart, and wherein the controller is configured to position the radiosurgical beam source to direct the radiosurgical beam to the heart to create a lesion in the heart to inhibit atrial fibrillation. 26. The system of claim 24, further comprising a robotic positioning system coupled to the controller and the radiosurgical beam source, wherein the controller is further configured to compute a first correction factor from the calculated respiratory motion, and separately compute a second correction factor from the second motion, wherein the controller is configured to generate a command signal to adjust a relative position of the radiosurgical beam and the target to compensate for the first motion using the robotic positioning system, wherein the controller is configured to generate a correction to the command signal using the first and second correction factors, and wherein the robotic positioning system is configured to receive the command signal from the controller to adjust the relative position of the radiosurgical beam source and the target. 27. The system of claim 26, wherein the robotic positioning system comprises six degrees of freedom to adjust the relative position of the radiosurgical beam source and the target. 28. The system of claim 24, further comprising: an imaging system coupled to the controller, wherein the imaging system is configured to generate the plurality of images of the target during the first period, and to generate the plurality of images of the target during the second period, and wherein the controller is configured to record information of the respiratory cycle detected by the breathing sensor and information of the pulsating cycle detected by the pulsation measurement device, during the first period, to receive the plurality of images of the target of the first period, and to combine the recorded information of the respiratory cycle and of the pulsating cycle during the first respiratory cycle with the plurality of images of the target of the first period to generate the first motion, and wherein the controller is configured to record information of the pulsating cycle detected by the pulsation measurement device during the second period, to receive the plurality of images of the target of the second period, and to combine the recorded information of the pulsating cycle during the second period with the plurality of images of the target of the second respiratory cycle to generate the second motion. 29. The system of claim 28, further comprising a signal processor coupled to the controller, the signal processor to receive the detected respiratory cycle, the detected pulsating cycle, the plurality of images of the target during the first period, and the plurality of images during the second period, wherein the signal processor is configured to combine information of the pulsating cycle and the respiratory cycle during the first period with the plurality of images of the target during the first period to form the first motion, wherein the signal processor is configured to combine information of the pulsating cycle during the second period with the plurality of images of the target during the second period to form the second motion, wherein the signal processor is configured to calculate the respiratory motion of the target using the first and second motions, and wherein the signal processor is configured to filter the second motion and the respiratory motion to cancel out undesired frequency components. 30. The system of claim 29, wherein the controller further comprises a storage unit to store image data of the plurality of images of the target. 31. The system of claim 29, further comprising: a pre-operative scanner coupled to the signal processor, the pre-operative scanner to generate a pre-operative scan for one or more of the plurality of images of the target, and wherein the imaging system is configured to generate one or more operative scans for one or more of the plurality of images of the target, and wherein the controller is configured to digitally compare one or more operative scans with the pre-operative scan. 32. The system of claim 23, wherein the pulsation measurement device is configured to detect at least one of pulsating arteries or cardiac pumping motion of the patient. 33. The system of claim 24, wherein the breathing sensor is at least one of an infrared tracking system, a force sensor, an air flow meter, a strain gauge, or a laser range sensor. 34. The system of claim 23, wherein the pulsating measurement device is at least one of a strain gauge, electrocardiograph, or a heart beat monitor. 35. The system of claim 24, wherein the pulsating cycle is a heartbeat cycle, wherein the pulsation motion is due to cardiac pumping motion, and wherein the controller comprises: a look-up table of positional data for the first motion; a look-up table of cardiac motion data for the second motion; and a look-up table of respiratory motion data for the calculated respiratory motion, and wherein the controller is configured to calculate the respiratory motion data by subtracting the cardiac motion data from the positional data for the first motion. 