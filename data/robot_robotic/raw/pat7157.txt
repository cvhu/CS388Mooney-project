An apparatus and method for performing treatment on an internal target region while compensating for breathing and other motion of the patient is provided in which the apparatus comprises a first imaging device for periodically generating positional data about the internal target region and a second imaging device for continuously generating positional data about one or more external markers attached to the patient's body or any external sensor such as a device for measuring air flow. The apparatus further comprises a processor that receives the positional data about the internal target region and the external markers in order to generate a correspondence between the position of the internal target region and the external markers and a treatment device that directs the treatment towards the position of the target region of the patient based on the positional data of the external markers.
Claims What is claimed is: 1. A method for compensating for breathing and other motions of the patient during treatment, the method comprising: generating images of the target region prior to the treatment; periodically generating positional data about the internal target region; continuously generating positional data about external motion of the patient's body using one or more external sensors; generating a correspondence between the position of the internal target region and the external sensors so that the treatment is directed towards the position of the target region of the patient based on the positional data of the external sensors and the target region's position is subsequently matched to the position of the target region in the preoperative images; and predicting the position of the target region at some predetermined later time based on the generated correspondence of the internal target region and the external sensors. 2. The method of claim 1, wherein periodically generating positional data comprises generating positional data about one or more fiducial markers located near the target region and wherein generating a correspondance further comprises computing the deformation state of the target region based on the relative position of the fiducial markers. 3. The method of claim 2 further comprising preoperative planning the treatment of the patient, the preoperative planning further comprising adding the computed deformation of the target region into preoperative planning based on the acquisition of more than one tomographic data set. 4. The method of claim 1, wherein generating a correspondence further comprises generating a deformation model for representing the correlation between the external and the internal patient motion further comprising generating a single snapshot so that the patient is instructed to return to the position within the respiration cycle corresponding to this single point. 5. The method of claim 1, wherein generating a correspondance further comprises generating a deformation model for representing the correlation between the external and the internal patient motion further comprising generating a series of snapshots to obtain a model for the correlation between the internal and the external motion, generating a new intraoperative snapshot, continuously updating the model during treatment by recomputing the entire model when the intraoperative snapshot is generated. 6. The method of claim 1, wherein generating images prior to treatment further comprising gathering a series of treatment data from more than one patient, generating a general model from the series of treatment data for the motion correlation between the external and the internal motion wherein the general model is used to one or more of infer the internal position data at fewer time points and without using internal fiducial markers. 7. The method of claim 1 further comprising moving a treatment beam in response to the correspondance of the internal and external motion. 8. The method of claim 7, wherein generating a correspondence further comprises generating a deformation model for representing the correlation between the external and the internal patient motion and wherein the treatment beam moving further comprises compensating for the time lag between a command to move the treatment beam and the movement of the treatment beam by determining the placement of the target region at a future time from the deformation model. 9. The method of claim 8, wherein the compensation further comprises determining the periodicity of pulsation motion and respiration motion. 10. The method of claim 1 further comprising moving the individual leaves of a multileaf collimator dynamically in response to the correspondance of the external and internal motions. 11. The method of claim 1 further comprising gating the treatment in response to the correspondence between the internal and external motions so that the treatment is switched on and off periodically. 12. The method of claim 1 further comprising distinguishing between voluntary patient motion and respiratory motion by comparing an actual internal placement of the target region to a placement of the target region inferred from a deformation model and recomputing the deformation model when the deviation between actual internal placement of the target region and the inferred placement of the target region exceeds a threshold value. 13. The method of claim 12, further comprising continuing the treatment without recomputing when the deviation between the actual internal placement of the target region and the inferred placement of the target region does not exceed the threshold value. 14. The method of claim 1 further comprising delineating the target region shown in an image generated prior to the treatment and matching the delineation to the three dimensional shape of the target region shown in the images generated prior to the treatment in order to determine the position of the target region. 15. The method of claim 14, wherein the delineating further comprises projecting the three dimensional shape of the target region generated by the images generated prior to treatment onto the periodically generated positional data. 16. The method of claim 1, wherein the periodic generation of positional data further comprises periodically generating ultrasound images indicating positional data about the internal target region. 17. The method of claim 16, wherein the periodically generating ultrasound images further comprises moving an ultrasound device that generates the ultrasound images using a robot. 18. The method of claim 17, wherein moving the ultrasound device further comprises limiting the movement of the ultrasound device towards the patient using a force sensor attached to the robot to prevent the ultrasound device from exerting undesirable force on the patient. 19. The method of claim 18 further comprising moving a treatment using a robot based on the images generated by the ultrasound device. 20. An apparatus for compensating for breathing and other motions of the patient during treatment, the apparatus comprising: a first detection device for periodically generating positional data about the internal target region; a second detection device for continuously generating positional data about pulsation motions within the patient; a processor that receives the positional data about the internal target region and the pulsation in order to generate a correspondence between the position of the internal target region and the pulsation so that the treatment is directed towards the position of the target region of the patient based on the positional data obtained from the pulsation sensors; and wherein the processor further comprises means for predicting the position of the target region at some predetermined later time based on the correspondence between the position of the internal target region and the pulsation. 21. The apparatus of claim 20 further comprising a third sensor for continuously generating positional data about respiratory motion and wherein the processor receives the positional data for the internal target region, the respiratory sensor and the pulsation sensor to compensate for the respiration and pulsations motions of the patient. 22. The apparatus of claim 20 further comprising a treatment beam having a multileaf collimator wherein the individual leaves of the multileaf collimator are moved dynamically in response to the correspondance of the external and internal motions. 23. The apparatus of claim 20 further comprising a treatment beam having a gating element so that, in response to the correspondence between the internal and external motions, the treatment beam is switched on and off periodically. 24. The apparatus of claim 20, wherein the first detection device further comprises an ultrasound device that periodically generates ultrasound images indicating positional data about the internal target region. 25. The apparatus of claim 24, wherein the first detection device further comprises a robot that moves the ultrasound device. 26. The apparatus of claim 25, wherein the first detection device further comprises a force sensor that limits the movement of the ultrasound device towards the patient to prevent the ultrasound device from exerting undesirable force on the patient. 27. The apparatus of claim 34 further comprising a treatment device that directs a treatment towards the patient, wherein the treatment device further comprises a robot that moves the treatment device. 28. A method for compensating for breathing and other motions of the patient during treatment, the method comprising: periodically generating positional data about the internal target region; continuously generating positional data about external motion of the patient's body using one or more external sensors; generating a deformation model between the position of the internal target region and the external sensors, the deformation model representing the correlation between the external and the internal patient motion; and predicting the position of the target region at some later time based on the deformation model. 29. The method of claim 28, wherein the predicting further comprises compensating for the time lag between a command to move a treatment device and the movement of the treatment device by predicting the position of the target region when the treatment device is moved based on the position when the command is made. 30. The method of claim 28, further comprising: distinguishing between voluntary patient motion and respiratory motion by comparing the position of the internal target region to a target region inferred from the deformation model; recomputing the deformation model when the deviation between actual internal placement of the target region and the inferred placement of the target region exceeds a threshold value; and continuing treatment without recomputing when the deviation does not exceed a threshold value. 31. A method for compensating for breathing and other motions of the patient during treatment, the method comprising: generating images of the target region prior to the treatment; periodically generating positional data about the internal target region; continuously generating positional data about external motion of the patient's body using one or more external sensors; generating a deformation model representing a correspondence between the position of the internal target region and the external sensors so that the treatment is directed towards the position of the target region of the patient based on the positional data of the external sensors and the target region's position is subsequently matched to the position of the target region in the preoperative images; predicting the position of the target region at some predetermined later time based on the generated correspondence of the internal target region and the external sensors; and compensating for the time lag between a command to move the treatment beam and the movement of the treatment beam by determining the placement of the target region at a future time from the deformation model. 32. The method of claim 31, further comprising: distinguishing between voluntary patient motion and respiratory motion by comparing the position of the internal target region to a target region inferred from the deformation model; recomputing the deformation model when the deviation between actual internal placement of the target region and the inferred placement of the target region exceeds a threshold value; and continuing treatment without recomputing when the deviation does not exceed a threshold value. 