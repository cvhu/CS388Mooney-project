In a first exemplary embodiment of the present invention, an automated, computerized method is provided for determining an illumination boundary in an image. The method comprises the steps of performing dynamic sampling in preselected local areas of the image to determine spectral ratio information for the image at each of the preselected local areas, and utilizing the spectral ratio information to identify an illumination boundary.
Claims What is claimed is: 1. An automated, computerized method for determining illumination in an image, comprising the steps of: a computer executing the following steps: automatically identifying spatio-spectral features in the image indicative of a spectral shift between an incident illuminant and an ambient illuminant; analyzing the identified spatio-spectral features of the image to determine a characteristic spectral ratio for the image; and utilizing the characteristic spectral ratio to identify an illumination boundary in the image. 2. The method of claim 1 wherein the steps of automatically identifying spatio-spectral features in the image indicative of a spectral shift between an incident illuminant and an ambient illuminant, and analyzing the identified spatio-spectral features of the image to determine a characteristic spectral ratio for the image are carried out by identifying token regions in the image and performing an analysis of token region neighbor relationships to determine the characteristic spectral ratio. 3. The method of claim 2 wherein the step of performing an analysis of token region neighbor relationships is carried out to identify X-junctions in the image, and utilizing the X-junctions to determine the characteristic spectral ratio. 4. The method of claim 3 wherein the step of performing an analysis of token region neighbor relationships to identify X-junctions in the image is carried out by performing a series of iterative selections of token neighbors and performing tests of neighbor characteristics related to X-junction parameters. 5. The method of claim 2 wherein the step of performing an analysis of token region neighbor relationships is carried out by generating a token region graph. 6. The method of claim 5 wherein the step of generating a token region graph is carried out by identifying perimeter pixels of each token region, for each perimeter pixel, finding a closest perimeter pixel for each other token region within a maximum distance, and compiling a list of all token regions corresponding to the pixels found within the maximum distance in the finding step. 7. The method of claim 2 wherein the step of identifying token regions in the image is carried out by selecting a seed region of pixels, testing the pixels of the seed region for similarity of color characteristics, and, in the event of a good seed determination, identifying pixel neighbors of the pixels of the seed region having similarity of color characteristics. 8. The method of claim 2 wherein the step of performing an analysis of token neighbor relationships is carried out by identifying Nth order tokens and comparing reflection ratio and spectral ratio relationships between neighbor tokens of the Nth order tokens to determine the characteristic spectral ratio. 9. The method of claim 1 wherein the characteristic spectral ratio comprises S=Dark/(Bright-Dark). 10. The method of claim 9 wherein the characteristic spectral ratio comprises a normalized value of S. 11. The method of claim 1 wherein the step of utilizing the characteristic spectral ratio to identify an illumination boundary is carried out by comparing a spectral ratio for a selected pair of color values, one on each side an image boundary, to the characteristic spectral ratio, to determine a match. 12. The method of claim 1 wherein the step of identifying spatio-spectral features in the image caused by a spectral shift between an incident illuminant and an ambient illuminant is carried out in each of a plurality of preselected local areas of the image. 13. The method of claim 1 wherein the steps of automatically identifying spatio-spectral features in the image indicative of a spectral shift between an incident illuminant and an ambient illuminant, and analyzing the identified spatio-spectral features of the image to determine a characteristic spectral ratio for the image are carried out by identifying an X-junction and utilizing the X-junction to determine the characteristic spectral ratio. 14. The method of claim 13 wherein the step of identifying an X-junction is carried out by using a fixed sized mask to analyze pixels of the image for X-junction constraints. 15. The method of claim 13 wherein the step of identifying an X-junction is carried out by using stochastic sampling. 16. A computer system, comprising: a CPU, and a memory storing an image file containing an image; the CPU is arranged and configured to execute a routine to automatically identify spatio-spectral features in the image indicative of a spectral shift between an incident illuminant and an ambient illuminant, analyze the identified spatio-spectral features of the image to determine a characteristic spectral ratio for the image and utilize the characteristic spectral ratio to identify an illumination boundary in the image. 17. The computer system of claim 16 wherein operation of the CPU to automatically identify spatio-spectral features in the image indicative of a spectral shift between an incident illuminant and an ambient illuminant, and analyze the identified spatio-spectral features of the image to determine a characteristic spectral ratio for the image is carried out by operating the CPU to identify token regions in the image and to perform an analysis of token region neighbor relationships to determine the characteristic spectral ratio. 18. The computer system of claim 17 wherein operation of the CPU to perform an analysis of token region neighbor relationships is carried out by operation of the CPU to identify X-junctions in the image, and to utilize the X-junctions to determine the characteristic spectral ratio. 19. The computer system of claim 18 wherein operation of the CPU to perform an analysis of token region neighbor relationships to identify X-junctions in the image is carried out by operating the CPU to perform a series of iterative selections of token neighbors and to perform tests of neighbor characteristics related to X-junction parameters. 20. The computer system of claim 17 wherein operation of the CPU to perform an analysis of token region neighbor relationships is carried out by operating the CPU to generate a token region graph. 21. The computer system of claim 20 wherein operation of the CPU to generate a token region graph is carried out operation of the CPU to identify perimeter pixels of each token region, for each perimeter pixel, to find a closest perimeter pixel for each other token region withing a maximum distance, and to compile a list of all token regions corresponding to the pixels found within the maximum distance in the finding step. 22. The computer system of claim 17 wherein operation of the CPU to identify token regions in the image is carried out by operating the CPU to select a seed region of pixels, test the pixels of the seed region for similarity of color characteristics, and, in the event of a good seed determination, identify pixel neighbors of the pixels of the seed region having similarity of color characteristics. 23. The computer system of claim 17 wherein operation of the CPU to perform an analysis of token neighbor relationships is carried out operating the CPU to identify Nth order tokens and to compare reflection ratio and spectral ratio relationships between neighbor tokens of the Nth order tokens to determine the characteristic spectral ratio. 24. The computer system of claim 16 wherein the characteristic spectral ratio comprises S=Dark/(Bright-Dark). 25. The computer system of claim 24 wherein the characteristic spectral ratio comprises a normalized value of S. 26. The computer system of claim 16 wherein operation of the CPU to utilize the characteristic spectral ratio to identify an illumination boundary is carried out by operating the CPU to compare a spectral ratio for a selected pair of color values, one on each side of an image boundary, to the characteristic spectral ratio, to determine a match. 27. The computer system of claim 16 wherein operation of the CPU to identify spatio-spectral features in the image indicative of a spectral shift between an incident illuminant and an ambient illuminant is carried out in each of a plurality of preselected local areas of the image. 28. The computer system of claim 16 wherein operation of the CPU to automatically identify spatio-spectral features in the image indicative of a spectral shift between an incident illuminant and an ambient illuminant, and to analyze the identified spatio-spectral features of the image to determine a characteristic spectral ratio for the image are carried out by operation of the CPU to identify an X-junction and to utilize the X-junction to determine the characteristic spectral ratio. 29. The computer system of claim 28 wherein operation of the CPU to identify an X-junction is carried out by operating the CPU to use a fixed sized mask to analyze pixels of the image for X-junction constraints. 30. The computer system of claim 28 wherein operation of the CPU to identify an X-junction is carried out by operating the CPU to use stochastic sampling. 31. A computer program product, disposed on a computer readable media, the product including computer executable process steps operable to control a computer to: provide an image file depicting an image, in a computer memory; automatically identify spatio-spectral features in the image indicative of a spectral shift between an incident illuminant and an ambient illuminant; analyze the identified spatio-spectral features of the image to determine a characteristic spectral ratio for the image; and utilize the characteristic spectral ratio to identify an illumination boundary in the image. 32. The computer program product of claim 31 wherein the process steps to control the computer to automatically identify spatio-spectral features in the image indicative of a spectral shift between an incident illuminant and an ambient illuminant, and analyze the identified spatio-spectral features of the image to determine a characteristic spectral ratio for the image are carried out by process steps to control the computer to identify token regions in the image and to perform an analysis of token region neighbor relationships to determine the characteristic spectral ratio. 33. The computer program product of claim 32 wherein the process step to control the computer to perform an analysis of token region neighbor relationships is carried out by a process step to control the computer to identify X-junctions in the image, and to utilize the X-junctions to determine the characteristic spectral ratio. 34. The computer program product of claim 33 wherein the process step to control the computer to perform an analysis of token region neighbor relationships to identify X-junctions in the image is carried out by process steps to control the computer to perform a series of iterative selections of token neighbors and to perform tests of neighbor characteristics related to X-junction parameters. 35. The computer program product of claim 32 wherein the process step to control the computer to identify token regions in the image is carried out by a process step to control the computer to select a seed region of pixels, test the pixels of the seed region for similarity of color characteristics, and, in the event of a good seed determination, identify pixel neighbors of the pixels of the seed region having similarity of color characteristics. 36. The computer program product of claim 31 wherein the process step to control the computer to utilize the characteristic spectral ratio to identify an illumination boundary is carried out by a process step to control the computer to compare a spectral ratio for a selected pair of color values, one on each side of an image boundary, to the characteristic spectral ratio, to determine a match. 37. The computer program product of claim 31 wherein the process steps to control the computer to automatically identify spatio-spectral features in the image indicative of a spectral shift between an incident illuminant and an ambient illuminant, and analyze the identified spatio-spectral features of the image to determine a characteristic spectral ratio for the image are carried out by process steps to control the computer to identify an X-junction and to utilize the X-junction to determine the characteristic spectral ratio. 38. The computer program product of claim 37 wherein the process step to control the computer to identify an X-junction is carried out by a process step to control the computer to use a fixed sized mask to analyze pixels of the image for X-junction constraints. 39. The computer program product of claim 37 wherein the process step to control the computer to identify an X-junction is carried out by a process step to control a computer to use stochastic sampling. 40. The computer program product of claim 31 wherein the process step to control the computer to analyze the identified spatio-spectral features of the image to determine a characteristic spectral ratio for the image is carried out by a process step to control the computer to determine a characteristic spectral ratio for each of a plurality of preselected local areas of the image. 