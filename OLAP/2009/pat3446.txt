A teat locating sensor for use in farming equipment such as robotic milking machines and teat disinfection units. One or more cameras capture an image of the udder. The captured image is processed by applying an edge detector to provide an edge image. A Hough transform is applied for detecting edges using semi-circles and near vertical forms. A feature detector then matches these to provide teat ends and teat sides and thus produces a teat location map. Colour or monochrome cameras can be used and a 2D or 3D map can be generated. Filtering is described to improve the accuracy if required.
Claims What is claimed is: 1. A teat locating sensor for use in an automated system, the sensor comprising at least one image capturer for capturing an image of an udder, an edge detector for detecting edges in the captured image to produce an edge image and a feature detector for detecting at least one teat feature in the edge image by detecting semi-circles in the edge image to thereby provide a teat location map. 2. A teat locating sensor as claimed in claim 1 wherein the at least one teat feature is a teat end. 3. A teat locating sensor as claimed in claim 1 wherein the at least one teat feature is teat sides. 4. A teat locating sensor as claimed in claim 1 wherein the edge detector and the feature detector are located in at least one processor. 5. A teat locating sensor as claimed in claim 1 wherein the sensor further includes a first filter to remove noise from the captured image. 6. A teat locating sensor as claimed in claim 1 wherein the sensor includes a colour edge detect system. 7. A teat locating sensor as claimed in claim 1 wherein the sensor includes an image converter to convert the captured image to greyscale. 8. A teat locating sensor as claimed in claim 1 wherein the sensor includes a second filter to remove erroneous teat observations from the teat location maps. 9. A teat locating sensor as claimed in claim 1 wherein the at least one image capturer is a video camera. 10. A teat locating sensor as claimed in claim 1 wherein there are two image capturers to provide a 3D teat location map. 11. A teat locating sensor as claimed in claim 1 wherein the feature detector is a Hough transform. 12. A method of providing the location of teats on an animal for use in an automated process, comprising the steps of: positioning a teat locating sensor for use in an automated system in the vicinity of an udder of an animal; capturing an image of the udder with an image capturer of the teat locating sensor to provide a captured image; applying an edge detector of the teat locating sensor to the captured image to provide an edge image; and applying a feature detector of the teat locating sensor to the edge image to provide a teat location map, the feature detector detecting at least one teat feature in the edge image by detecting semi-circles in the edge image. 13. A method of providing the location of teats on an animal as claimed in claim 12 wherein the captured image is a colour video image. 14. A method of providing the location of teats on an animal as claimed in claim 12 wherein the captured image is a monochrome image. 15. A method of providing the location of teats on an animal as claimed in claim 12 wherein the method includes the step of pre-processing the captured image to reduce noise. 16. A method of providing the location of teats on an animal as claimed in claim 12 wherein the method includes the step of converting the captured image to greyscale. 17. A method of providing the location of teats on an animal as claimed in claim 12 wherein the step of applying an edge detector includes using a Canny edge detector. 18. A method of providing the location of teats on an animal as claimed in claim 12 wherein the step of applying an edge detector comprises applying a Hough transform to detect semicircles that face downwards in the edge image. 19. A method of providing the location of teats on an animal as claimed in claim 12 wherein the step of applying an edge detector comprises applying a Hough Transform for detecting edges. 20. A method of providing the location of teats on an animal as claimed in claim 19 wherein the method includes the step of matching the detected edges to the semicircles by looking for edges that come within a given threshold of the semicircle contour, to provide observed teats. 21. A method of providing the location of teats on an animal as claimed in claim 19 wherein the method includes the step of providing the angles of teats by taking the average angle of the two edges found for a given teat. 22. A method of providing the location of teats on an animal as claimed in claim 12 wherein the method includes the step of filtering the individual observed teats using a Kalman filter. 23. A method of providing the location of teats on an is animal as claimed in claim 12 wherein the method includes the step of replacing missing observed teats from observed teats in earlier maps. 24. A method of providing the location of teats on an animal as claimed in claim 12 wherein the method includes the step of combining teat location maps from different image capturers to provide a 3D teat location map. 