A trajectory generation system is provided for operating a robot in response to a motion command. The robot is a multi-jointed manipulator with an end-effector that traverses a trajectory. A Cartesian trajectory generator converts the motion command into a requested Cartesian positions vector and a requested Cartesian velocities vector. A Jacobian matrix of the manipulator defines the relationship between the manipulator joint velocities vector and the manipulator Cartesian velocities vector. A requested joint velocities vector is computed from the requested Cartesian velocities vector by way of the inverse of the Jacobian matrix. The requested joint velocities vector defines a planned state vector for the manipulator.
Claims What is claimed is: 1. A trajectory generation system to operate a robotic manipulator in response to a motion command, where the manipulator includes an end effector, having a position and an orientation, and a plurality of joints, each joint having a position, velocity and acceleration, the generation system comprising: a Cartesian trajectory generator operable to convert the motion command into a requested Cartesian positions vector and a requested Cartesian velocities vector; a Jacobian matrix of the manipulator defining the relationship between a manipulator joint velocities vector and a manipulator Cartesian velocities vector; an inverse of the Jacobian matrix for transforming the requested Cartesian velocities vector to a requested joint velocities vector; an inverse kinematics determiner operable to calculate a requested joint positions vector based upon the requested Cartesian positions vector, wherein the requested joint velocities vector and the requested joint positions vector define a planned vector of the manipulator; and a singularity handler activable in response to detecting a singularity, to constrain the motion of the robot manipulator through the singularity such that the joint velocity of each joint of the manipulator does not exceed a predetermined maximum velocity, wherein the singularity handler comprises a null space mover to perform a move in a null space of the Jacobian matrix, such that the aligned joints are moved to appropriate destination values and the position and orientation of the end-effector are not affected. 2. The trajectory generation system of claim 1 wherein the trajectory generation system further comprises a speed scaleback module activable in response to detecting a predicted joint limit violation, to compute a constrained path speed such that the joint velocity of each manipulator joint does not exceed a predetermined maximum velocity and the constrained path maintains the planned trajectory. 3. The trajectory generation system of claim 1 wherein the singularity handler further comprises a velocity limiter activable in response to detecting said singularity to compute a permitted joint position change, such that the maximum predetermined velocity for each of said joints is not exceeded. 4. The trajectory generation system of claim 1 further including a glide path determiner operable to compute an estimated stopping position based upon using full joint deceleration from current joint velocities. 5. The trajectory generation system of claim 1 further comprising a plurality of state vectors such that a trajectory is defined, and further comprising a weave determiner operable to superpose a predetermined waveform upon the trajectory thereby forming a first weave direction, wherein the weave determiner computes a rotation matrix for rotating from the first weave direction to a new weave direction. 6. The trajectory generation system of claim 1 further comprising a reduced order system determiner activable, in response to detecting a robot having less than six independent joints, to modify the Jacobian matrix such that a row is ignore, resulting in a square Jacobian defining the relationship between the manipulator Cartesian velocities vector and the manipulator joint velocities vector. 7. A trajectory generation system to operate a robot in response to a motion command, said robot having a manipulator and an end-effector that traverses an actual trajectory, said manipulator including a plurality of joints, each having a position, velocity, and acceleration, said end-effector having a position and an orientation, the generation system comprising: a Cartesian trajectory generator operable to convert the motion command into a requested Cartesian positions vector and a requested Cartesian velocities vector; a Jacobian matrix of the manipulator defining the relationship between a manipulator joint velocities vector and a manipulator Cartesian velocities vector; and an inverse of the Jacobian matrix operable to calculate a requested joint velocities vector based upon the requested Cartesian velocities vector; an inverse kinematics module operable to calculate a requested joint positions vector based upon the requested Cartesian positions vector; a speed scaleback module activable, in response to detecting a predicted joint speed limit violation, to compute a constrained path speed such that the joint velocity of each manipulator joint does not exceed a predetermined maximum velocity and the constrained path speed maintains a planned path; and a singularity handler activable, in response to detecting a singularity, to constrain the motion of the robot manipulator through the singularity such that the joint velocity of each joint of the manipulator does not exceed a predetermined maximum velocity; said singularity handler comprising a null space mover activable, in response to detecting a singularity, to perform a move in a null space of the Jacobian matrix, such that the aligned joints are moved to a position where said joints can exit the singularity smoothly and the position and orientation of the end-effector are not affected. 8. The trajectory generation system of claim 7, wherein the singularity handler further comprises a velocity limiter activable in response to detecting said singularity to compute a permitted joint position change, such that the maximum predetermined velocity for each of said joints is not exceeded. 9. The trajectory generation system of claim 7 further including a glide path determiner operable to compute an estimated stopping position based upon using full joint deceleration from current joint velocities. 10. The trajectory generation system of claim 7 further comprising a plurality of state vectors such that a trajectory is defined, and further comprising a weave determiner operable to superpose a predetermined waveform upon the trajectory thereby forming a first weave direction, wherein the weave determiner computes a rotation matrix for rotating from the first weave direction to a new weave direction. 11. The trajectory generation system of claim 7 further comprising a reduced order system determiner activable, in response to detecting a robot having less than six independent joints, to modify the Jacobian matrix such that a row is ignore, resulting in a square Jacobian defining the relationship between the manipulator Cartesian velocities vector and the manipulator joint velocities vector. 12. A method of generating an actual trajectory for a robotic manipulator, where the robotic manipulator includes an end effector, having a position and an orientation, and a plurality of joints, each joint having a position, velocity and acceleration, comprising: receiving a motion request; converting the motion request to a requested Cartesian motion including a requested Cartesian position vector and a requested Cartesian velocity vector; computing a requested joint velocity vector from the requested Cartesian velocity vector with an inverse Jacobian matrix, wherein a Jacobian matrix for the robotic manipulator defines the relationship between a manipulator joint velocities vector and a manipulator Cartesian velocities vector; computing a requested joint position vector from the requested Cartesian position vector by means of inverse kinematics; and defining a planned state vector with the requested joint velocity vector and the requested joint position vector; detecting a singularity condition, prior to moving the robotic manipulator in accordance with the planned state vector; and constraining the movement of the robotic manipulator, such that the joint velocity of each joint of the robotic manipulator does not exceed a predetermined maximum velocity, wherein the movement in performed in a null space of the Jacobian matrix, thereby aligning the joints without affecting the position and orientation of the end-effector of the robotic manipulator. 