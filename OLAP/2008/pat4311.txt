An apparatus and method for performing treatment on an internal target region while compensating for breathing and other motion of the patient is provided in which the apparatus comprises a first imaging device for periodically generating positional data about the internal target region and a second imaging device for continuously generating positional data about one or more external markers attached to the patient's body or any external sensor such as a device for measuring air flow. The apparatus further comprises a processor that receives the positional data about the internal target region and the external markers in order to generate a correspondence between the position of the internal target region and the external markers and a treatment device that directs the treatment towards the position of the target region of the patient based on the positional data of the external markers.
Claims The invention claimed is: 1. A method of compensating for motions of a patient during treatment, the method comprising: generating pre-operative three-dimensional images of an internal region showing an internal fiducial and a target region located in the internal region; acquiring an ultrasound image of the internal region, the ultrasound image showing the internal fiducial; matching the internal fiducial in the ultrasound image with the internal fiducial in one of the pre-operative three-dimensional images to determine a position of the target region; simultaneously detecting a location of an external marker coupled to the patient to indicate an external movement of the patient and acquiring a corresponding ultrasound image of the internal region during treatment; and generating a correlation between the external movement and the position of the target region so that the position of the target region is inferred from the location of the external marker. 2. The method of claim 1, further comprising detecting the position of the external marker using infrared imaging, visual imaging, or magnetic localization. 3. The method of claim 1, further comprising determining a position of an ultrasound camera that is used to generate the ultrasound image. 4. The method of claim 3, wherein a material filled cushion is located between the ultrasound camera and the patient to improve the ultrasound images. 5. The method of claim 3, further comprising sensing a force of the ultrasound camera into the patient and preventing the ultrasound camera from applying undesirable force to the patient. 6. The method of claim 1, wherein generating the correlation further comprises producing a deformation model for representing the correlation between the external movement and the position of the target region. 7. The method of claim 1, further comprising distinguishing between respiratory motion and another patient motion by comparing the position of the target region to an inferred position of the target region inferred from the correlation and re-computing the correlation when a deviation between the position of the target region and the inferred position of the target region exceeds a threshold value. 8. The method of claim 7, further comprising continuing the treatment without re-computing the correlation when the deviation does not exceed the threshold value. 9. The method of claim 1, further comprising generating a series of ultrasound snapshots, including the ultrasound image, to generate a correlation of an external movement of the patient and the position of the target region, generating a plurality of ultrasound snapshots during the treatment, and continuously updating the correlation during the treatment by re-computing the correlation each time one of the plurality of ultrasound snapshots is generated during the treatment. 10. The method of claim 1, further comprising computing a deformation state of the target region based on relative positions of the internal fiducial and another internal fiducial. 11. The method of claim 1, wherein generating the correlation comprises computing a deformation state of the target region based on the corresponding ultrasound image. 12. The method of claim 1, wherein generating the correlation comprises: fitting a first curve to a first point cloud corresponding to the external marker; and fitting a second curve to a second point cloud corresponding to the internal marker. 13. The method of claim 12, wherein generating the correlation further comprises: locating on the first curve a first point that represents a first location of the external marker; and finding a second point on the second curve that corresponds to the first point on the first curve. 14. The method of claim 12, further comprising time-stamping each of the points of the first point cloud. 15. The method of claim 12, further comprising predicting the position of the target region, wherein the predicting comprises: locating on the first curve a first point that represents the location of the external marker at a first time; and finding a point on the second curve that corresponds to a second point on the first curve, wherein the second point corresponds to a second time after the first time. 16. The method of claim 1, further comprising: determining a respiratory pattern of the patient, wherein the external movement is a respiration movement; and predicting the position of the target region based on the correlation. 17. The method of claim 16, further comprising dynamically moving a robotic arm coupled to an ultrasonic camera in response to predicting the position of the target region based on the correlation. 18. The method of claim 16, further comprising dynamically adjusting a direction of a treatment beam based on the predicting to compensate for a time lag between detection and adjustment, the detection being a detection of a new position of the target region and the adjustment being an adjustment of the treatment beam toward the new position. 19. The method of claim 18, wherein the compensating further comprises determining a periodicity of the respiration motion. 20. The method of claim 18, further comprising switching a treatment beam on and off according to the predicting. 21. The method of claim 16, wherein the predicting compensates for a time lag between detection and adjustment, the detection being a detection of a change in the position of the internal region and the adjustment being an adjustment of a treatment beam toward a predicted position of the target region. 22. The method of claim 1, further comprising: determining the location of the external marker during the treatment; and determining the position of the target region based on the correlation in response to determining the location of the external marker. 23. The method of claim 1, further comprising: acquiring another ultrasound image during the treatment; and updating the correlation based on the other ultrasound image. 24. The method of claim 1, further comprising generating a general model to describe a movement of an anatomic region, wherein the movement of the anatomic region is similar among a plurality of patients. 25. An apparatus for compensating for a motion of an internal target region in a patient during treatment, the apparatus comprising: a beaming apparatus to generate a treatment beam; an ultrasound imaging device for periodically generating internal positional data about the internal target region during treatment; and a processor to receive the internal positional data and external positional data to generate a correlation between a position of the internal target region as determined from the internal positional data and an external marker, wherein the processor is configured to generate a control signal to move the beaming apparatus to direct the treatment beam toward the target region based on the external positional data. 26. The apparatus of claim 25, further comprising an ultrasound guidance system for positioning the ultrasound imaging device to show the target region in an ultrasound image, wherein the ultrasound guidance system includes a remotely operated robotic arm that is connected to the ultrasound imaging device. 27. The apparatus of claim 25, wherein the processor is configured to use the internal positional data, the external positional data, and respiratory data to compensate for movements of the patient. 28. The apparatus of claim 25, wherein the beaming apparatus comprises a multileaf collimator having individual leaves, wherein the beaming apparatus is configured to dynamically move the individual leaves of the multileaf collimator according to the correlation. 29. The apparatus of claim 25, wherein the beaming apparatus is configured to turn the treatment beam on and off. 30. The apparatus of claim 25, further comprising a gantry, wherein the beaming apparatus is mounted on the gantry. 31. The apparatus of claim 25, further comprising a robotic arm, wherein the beaming apparatus is mounted on the robotic arm. 32. The apparatus of claim 31, wherein the robotic arm is configured to move in at least four degrees of freedom. 33. A method for compensating for motions of a patient during treatment, the method comprising: generating images of a target region prior to the treatment; periodically generating ultrasound images indicating positional data about the target region during the treatment; and moving a linear accelerator to direct a treatment beam at a position of the target region based on the ultrasound images periodically generated during the treatment. 